'use strict';

var FIREBASE_URL = 'https://login-appp.firebaseio.com/';
var fb = new Firebase(FIREBASE_URL);
var onLoggedOut = $('.onLoggedOut');
var onLoggedIn = $('.onLoggedIn');

var loginPage = $('.login');

var registerPage = $('.register');

$('.toLoginBtn, .toRegisterBtn').click(toggleLoginRegister);

$('.doLogout').click(function () {
  fb.unauth();
  toggleContentBasedOnLogin();
});

$('.register form').submit(function () {
  var email = $('.register input[type="email"]');
  var passwords = $('.register input[type="password"]');
  var password = $(passwords[0]).val();
  var passwordCheck = $(passwords[1]).val();

  if (password === passwordCheck) {
    fb.createUser({
      email: email.val(),
      password: password
    }, function (err, userData) {
      if (err) {
        console.log(err.toString());
      } else {
        toggleLoginRegister();
      }
    });
  } else {
    alert('The passwords do not match');
  }

  event.preventDefault();
});

$('.login form').submit(function () {
  var email = $('.login input[type="email"]');
  var password = $('.login input[type="password"]');

  fb.authWithPassword({
    email: email.val(),
    password: password.val()
  }, function (err, authData) {
    if (err) {
      alert(err.toString());
    } else {
      toggleContentBasedOnLogin();
      var h1 = $('.onLoggedIn h1').text('Hello ' + authData.password.email);
      email.val('');
      password.val('');
      $.ajax({
        method: 'PUT',
        url: '' + FIREBASE_URL + '/users/' + authData.uid + '/profile.json',
        data: JSON.stringify(authData)
      });
    }
  });

  event.preventDefault();
});

toggleContentBasedOnLogin();

function toggleLoginRegister() {
  registerPage.toggleClass('hidden');
  loginPage.toggleClass('hidden');
}

function toggleContentBasedOnLogin() {
  var authData = fb.getAuth();

  if (authData) {
    onLoggedOut.addClass('hidden');
    onLoggedIn.removeClass('hidden');
  } else {
    onLoggedOut.removeClass('hidden');
    onLoggedIn.addClass('hidden');
  }
}
//# sourceMappingURL=data:application/json;base64,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QUssWUFBWSxlQUFVLFFBQVEsQ0FBQyxHQUFHLGtCQUFlO0FBQ3pELFlBQUksRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQztPQUMvQixDQUFDLENBQUM7S0FDSjtHQUNGLENBQUMsQ0FBQzs7QUFFSCxPQUFLLENBQUMsY0FBYyxFQUFFLENBQUM7Q0FDeEIsQ0FBQyxDQUFDOztBQUVILHlCQUF5QixFQUFFLENBQUM7O0FBRTVCLFNBQVMsbUJBQW1CLEdBQUc7QUFDN0IsY0FBWSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUNuQyxXQUFTLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0NBQ2pDOztBQUVELFNBQVMseUJBQXlCLEdBQUc7QUFDbkMsTUFBSSxRQUFRLEdBQUcsRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDOztBQUU1QixNQUFJLFFBQVEsRUFBRTtBQUNaLGVBQVcsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDL0IsY0FBVSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQztHQUNsQyxNQUFNO0FBQ0wsZUFBVyxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUNsQyxjQUFVLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0dBQy9CO0NBQ0YiLCJmaWxlIjoic3JjL2pzL21haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgRklSRUJBU0VfVVJMID0gJ2h0dHBzOi8vbG9naW4tYXBwcC5maXJlYmFzZWlvLmNvbS8nO1xudmFyIGZiID0gbmV3IEZpcmViYXNlKEZJUkVCQVNFX1VSTCk7XG52YXIgb25Mb2dnZWRPdXQgPSAkKCcub25Mb2dnZWRPdXQnKTtcbnZhciBvbkxvZ2dlZEluID0gJCgnLm9uTG9nZ2VkSW4nKTtcblxudmFyIGxvZ2luUGFnZSA9ICQoJy5sb2dpbicpO1xuXG52YXIgcmVnaXN0ZXJQYWdlID0gJCgnLnJlZ2lzdGVyJyk7XG5cbiQoJy50b0xvZ2luQnRuLCAudG9SZWdpc3RlckJ0bicpLmNsaWNrKHRvZ2dsZUxvZ2luUmVnaXN0ZXIpO1xuXG4kKCcuZG9Mb2dvdXQnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gIGZiLnVuYXV0aCgpO1xuICB0b2dnbGVDb250ZW50QmFzZWRPbkxvZ2luKCk7XG59KVxuXG4kKCcucmVnaXN0ZXIgZm9ybScpLnN1Ym1pdChmdW5jdGlvbiAoKSB7XG4gIHZhciBlbWFpbCA9ICQoJy5yZWdpc3RlciBpbnB1dFt0eXBlPVwiZW1haWxcIl0nKTtcbiAgdmFyIHBhc3N3b3JkcyA9ICQoJy5yZWdpc3RlciBpbnB1dFt0eXBlPVwicGFzc3dvcmRcIl0nKTtcbiAgdmFyIHBhc3N3b3JkID0gJChwYXNzd29yZHNbMF0pLnZhbCgpO1xuICB2YXIgcGFzc3dvcmRDaGVjayA9ICQocGFzc3dvcmRzWzFdKS52YWwoKTtcblxuICBpZiAocGFzc3dvcmQgPT09IHBhc3N3b3JkQ2hlY2spIHtcbiAgICBmYi5jcmVhdGVVc2VyKHtcbiAgICAgIGVtYWlsOiBlbWFpbC52YWwoKSxcbiAgICAgIHBhc3N3b3JkOiBwYXNzd29yZFxuICAgIH0sZnVuY3Rpb24gKGVyciwgdXNlckRhdGEpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyLnRvU3RyaW5nKCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG9nZ2xlTG9naW5SZWdpc3RlcigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGFsZXJ0KCdUaGUgcGFzc3dvcmRzIGRvIG5vdCBtYXRjaCcpO1xuICB9XG5cbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbn0pO1xuXG4kKCcubG9naW4gZm9ybScpLnN1Ym1pdChmdW5jdGlvbiAoKSB7XG4gIHZhciBlbWFpbCA9ICQoJy5sb2dpbiBpbnB1dFt0eXBlPVwiZW1haWxcIl0nKTtcbiAgdmFyIHBhc3N3b3JkID0gJCgnLmxvZ2luIGlucHV0W3R5cGU9XCJwYXNzd29yZFwiXScpO1xuXG4gIGZiLmF1dGhXaXRoUGFzc3dvcmQoe1xuICAgIGVtYWlsOiBlbWFpbC52YWwoKSxcbiAgICBwYXNzd29yZDogcGFzc3dvcmQudmFsKClcbiAgfSwgZnVuY3Rpb24gKGVyciwgYXV0aERhdGEpIHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBhbGVydChlcnIudG9TdHJpbmcoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRvZ2dsZUNvbnRlbnRCYXNlZE9uTG9naW4oKTtcbiAgICAgIHZhciBoMSA9ICQoJy5vbkxvZ2dlZEluIGgxJykudGV4dChgSGVsbG8gJHthdXRoRGF0YS5wYXNzd29yZC5lbWFpbH1gKVxuICAgICAgZW1haWwudmFsKCcnKTtcbiAgICAgIHBhc3N3b3JkLnZhbCgnJyk7XG4gICAgICAkLmFqYXgoe1xuICAgICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgICB1cmw6IGAke0ZJUkVCQVNFX1VSTH0vdXNlcnMvJHthdXRoRGF0YS51aWR9L3Byb2ZpbGUuanNvbmAsXG4gICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGF1dGhEYXRhKVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcblxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xufSk7XG5cbnRvZ2dsZUNvbnRlbnRCYXNlZE9uTG9naW4oKTtcblxuZnVuY3Rpb24gdG9nZ2xlTG9naW5SZWdpc3RlcigpIHtcbiAgcmVnaXN0ZXJQYWdlLnRvZ2dsZUNsYXNzKCdoaWRkZW4nKTtcbiAgbG9naW5QYWdlLnRvZ2dsZUNsYXNzKCdoaWRkZW4nKTtcbn1cblxuZnVuY3Rpb24gdG9nZ2xlQ29udGVudEJhc2VkT25Mb2dpbigpIHtcbiAgdmFyIGF1dGhEYXRhID0gZmIuZ2V0QXV0aCgpO1xuXG4gIGlmIChhdXRoRGF0YSkge1xuICAgIG9uTG9nZ2VkT3V0LmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICBvbkxvZ2dlZEluLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgfSBlbHNlIHtcbiAgICBvbkxvZ2dlZE91dC5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgb25Mb2dnZWRJbi5hZGRDbGFzcygnaGlkZGVuJyk7XG4gIH1cbn1cbiJdfQ==